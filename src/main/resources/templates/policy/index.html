<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LotteON 서비스 이용약관</title>

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/policy/policy.css}"/>
    <link rel="stylesheet" th:href="@{/css/include/header.css}">
    <link rel="stylesheet" th:href="@{/css/include/footer.css}">
    <link rel="stylesheet" th:href="@{/css/include/reset.css}">
    <link rel="stylesheet" th:href="@{/css/include/layout.css}"/>
</head>

<body>
<!-- Header -->
<header th:replace="~{layout/header::header}"></header>
<header th:replace="~{layout/header-nav}"></header>

<!-- Main Content -->
<div class="layout-container">
    <!-- Aside Section -->
    <aside class="layout-left">
        <th:block th:replace="~{layout/aside-cate}"></th:block>
    </aside>

    <!-- Main Section -->
    <main>
        <h1>LotteON 서비스 이용약관</h1>

        <!-- 인쇄 버튼 추가 -->
        <button onclick="printPage()" class="print-button">
            <img src="/images/print.png" alt="print" /></button>

        <!-- Terms Tabs -->
        <div class="terms-tabs">
            <a th:href="@{/policy/buyer}">
                <img th:src="@{/images/policy/termsicon1.png}" alt="구매자 약관"/>
            </a>
            <a th:href="@{/policy/seller}">
                <img th:src="@{/images/policy/termsicon2.png}" alt="판매자 약관"/>
            </a>
            <a th:href="@{/policy/finance}">
                <img th:src="@{/images/policy/termsicon3.png}" alt="전자금융 약관"/>
            </a>
            <a th:href="@{/policy/location}">
                <img th:src="@{/images/policy/termsicon4.png}" alt="위치정보 약관"/>
            </a>
            <a th:href="@{/policy/privacy}">
                <img th:src="@{/images/policy/termsicon5.png}" alt="개인정보 처리방침"/>
            </a>
        </div>

        <!-- Terms and Policy Section -->
        <section class="terms-policy-section">
            <!-- Terms Section -->
            <div class="terms-title" onclick="toggleContent(this)">
                <h3 th:text="${terms}">약관 제목</h3>
                <span class="toggle-button">
                    <img th:src="@{/images/policy/plus.png}" alt="펼치기" class="toggle-icon" />
                </span>
            </div>
            <div class="terms-content" style="display: none;">
                <p th:utext="${termsDetail}" style="white-space: pre-wrap;"></p>  <!-- 약관 내용 출력 -->
            </div>

            <!-- Policy Section -->
            <div class="policy-title" onclick="toggleContent(this)">
                <h3 th:text="${policy}">정책 제목</h3>
                <span class="toggle-button" style="display: none;">
                    <img th:src="@{/images/policy/plus.png}" alt="펼치기" class="toggle-icon" />
                </span>
            </div>
            <div class="policy-content" style="display: none;">
                <p th:utext="${policyDetail}" style="white-space: pre-wrap;"></p> <!-- 정책 내용 출력 -->
            </div>

            <!-- 스크롤 최상단 버튼 -->
            <button id="scrollTopBtn" class="scroll-top-btn" onclick="scrollToTop()">
                <img src="/images/up.png" alt="scroll to top" />
            </button>
        </section>
    </main>
</div>

<!-- Footer -->
<footer th:replace="~{layout/footer::footer}"></footer>

<!-- Toggle Script -->
<script>
    function toggleContent(element) {
        const content = element.nextElementSibling;
        const button = element.querySelector('.toggle-button img');  // 이미지 선택

        if (content.style.display === "none" || content.style.display === "") {
            content.style.display = "block";
            button.src = "/images/policy/minus.png";  // 접기 이미지로 변경
            button.alt = "접기";  // 대체 텍스트 변경
        } else {
            content.style.display = "none";
            button.src = "/images/policy/plus.png";  // 펼치기 이미지로 변경
            button.alt = "펼치기";  // 대체 텍스트 변경
        }
    }

    function printPage() {
        window.print();  // 브라우저의 인쇄 기능을 호출
    }

    // 페이지 상단으로 즉시 스크롤하는 함수
    function scrollToTop() {
        window.scrollTo(0, 0);  // 최상단으로 즉시 이동
    }

    // 스크롤 이벤트 리스너로 버튼 표시 제어
    window.onscroll = function() {
        var scrollTopBtn = document.getElementById("scrollTopBtn");
        var footer = document.querySelector("footer");  // 푸터 요소 선택
        var footerRect = footer.getBoundingClientRect();  // 푸터의 위치 정보

        // 현재 스크롤 위치와 푸터의 위치를 기반으로 버튼 표시 제어
        if ((document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) && footerRect.top > window.innerHeight) {
            scrollTopBtn.style.display = "block";  // 버튼 표시
        } else {
            scrollTopBtn.style.display = "none";   // 버튼 숨김
        }
    };
</script>
</body>
</html>
