<!-- 회원정보 섹션 -->
<section th:fragment="point">
    <a href="#"><img src="/images/image.PNG" alt="패션, 타운 하나로 끝" class="banner"></a>
    <!-- 810x86 배너 이미지 -->
    <article class="latest">
        <h3>포인트내역</h3>
        <!-- 포인트내역 검색바 -->
        <div class="myinfoSearch">
            <p>기간별 조회</p>
            <a href="/my/point">전체</a>
            <a href="/my/point?cate=week">일주일</a>
            <a href="/my/point?cate=halfmonth">15일</a>
            <a href="/my/point?cate=month">1개월</a>
            <select id="monthSelect">
                <option value="">검색 기간 선택</option>
            </select>
            <div class="date-wrapper">
                <div class="start-date-wrapper">
                    시작날짜 : <input type="date" id="startDate" class="start-date" placeholder="시작 날짜 선택">
                </div>

                <div class="end-date-wrapper">
                    종료날짜 : <input type="date" id="endDate" class="end-date" placeholder="종료 날짜 선택" >
                </div>
            </div>
            <button onclick="searchOrders()">검색</button>
        </div>

        <!-- 포인트 있을 때 -->
        <h3>포인트적립내역</h3>
        <table border="0" class="widthtable">
            <tr>
                <th>날짜</th>
                <th>구분</th>
                <th>주문번호</th>
                <th>적립금액</th>
                <th>비고</th>
                <th>유효기간</th>
            </tr>
            <!-- 10개 출력이나 5개만 -->
            <tr>
                <td>2022-12-10</td>
                <td>적립</td>
                <td>2022121001</td>
                <td>340</td>
                <td>상품 구매확정</td>
                <td>2024-12-10</td>
            </tr>

            <tr>
                <td>2022-12-10</td>
                <td>적립</td>
                <td>2022121001</td>
                <td>340</td>
                <td>상품 구매확정</td>
                <td>2024-12-10</td>
            </tr>

        </table>

        <div class="pagingBox">
            <div class="pagingList">
                <!-- 이전 버튼 -->
                <a href="#" class="prev"></a>

                <!-- 페이지 링크 -->
                <a href="#">1</a>
                <a href="#" class="active">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
                <a href="#">5</a>

                <!-- 다음 버튼 -->
                <a href="#" class="next">></a>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const today = new Date().toISOString().split('T')[0]; // 오늘 날짜
                const startDateInput = document.getElementById('startDate');
                const endDateInput = document.getElementById('endDate');

                // 시작 날짜는 오늘 날짜 이전만 선택 가능하게 설정
                startDateInput.setAttribute('max', today);

                startDateInput.addEventListener('change', function() {
                    const selectedStartDate = new Date(this.value);

                    // 종료 날짜는 시작 날짜 이후부터 3년 내로 설정, 그리고 오늘 날짜를 넘을 수 없음
                    const maxEndDate = new Date(selectedStartDate);
                    maxEndDate.setFullYear(maxEndDate.getFullYear() + 3);

                    const formattedMaxEndDate = maxEndDate.toISOString().split('T')[0];
                    const minEndDate = this.value;

                    // 종료 날짜는 시작 날짜 이후부터 선택 가능하고, 오늘 날짜와 3년 후 날짜 중 더 이른 날짜까지만 선택 가능
                    endDateInput.setAttribute('min', minEndDate);
                    endDateInput.setAttribute('max', formattedMaxEndDate < today ? formattedMaxEndDate : today);
                    endDateInput.removeAttribute('readonly'); // 종료 날짜 필드 활성화
                });
            });
        </script>
    </article>
</section>